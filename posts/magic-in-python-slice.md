---
title: "Python 切片魔法"
date: "2022-03-08"
---

# Python 切片魔法

从朋友那里得知了 Python 的一个有趣的现象

```python
l = [1,2,3,4]
l[1:2] = ''
print(l) #[1, 3, 4]
```

然后扩展了一下其他魔法

```python
l = [1,2,3,4]
l[1:2] = 'abcdefg'
print(l) #[1, 'a', 'b', 'c', 'd', 'e', 'f', 'g', 3, 4]
```

Python 切片赋值真是个魔法

下面简单解释下

来自于 [Python 官方文档](https://docs.python.org/zh-cn/3/reference/simple_stmts.html#assignment-statements)

> 如果目标为一个切片：引用中的原型表达式会被求值。 它应当产生一个可变序列对象（例如列表）。 被赋值对象应当是一个相同类型的序列对象。 接下来，下界与上界表达式如果存在的话将被求值；默认值分别为零和序列长度。 上下边界值应当为整数。 如果某一边界为负值，则会加上序列长度。 求出的边界会被裁剪至介于零和序列长度的开区间中。 最后，将要求序列对象以被赋值序列的项替换该切片。 切片的长度可能与被赋值序列的长度不同，这会在目标序列允许的情况下改变目标序列的长度。

源码以后再说
